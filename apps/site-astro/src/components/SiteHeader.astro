---
import { getSanityTypeDisplayText } from "@/lib/sanityStrings";
import { getUrlForSanityType } from "@/lib/url";
import { Search } from "lucide-react";
import ThemeToggle from "@/components/util/ThemeToggle.astro";
import {SiteLogo} from "@/components/homepage/SiteLogo";
---

<header
  class="site-header flex flex-col place-content-between items-center gap-4 p-4 sm:flex-row sm:items-start sm:p-6"
  data-pagefind-ignore
>
  <a href="/"><h2 class="h2 pb-0 text-primary/80 hover:text-primary focus:text-primary"><SiteLogo color={"currentColor"} width={70} /></h2></a>

  <nav class="flex flex-row flex-wrap items-center gap-x-8 gap-y-4 sm:gap-6">
    <a href="/about" class="link">About</a>
    <a href={getUrlForSanityType("post", "")} class="link"
      >{getSanityTypeDisplayText("post", true)}</a
    >
    <a href={getUrlForSanityType("note", "")} class="link"
      >{getSanityTypeDisplayText("note", true)}</a
    >
    <a href={getUrlForSanityType("project", "")} class="link"
      >{getSanityTypeDisplayText("project", true)}</a
    >

    <ThemeToggle />

    <button
      class="border-focusable absolute top-4 right-4 sm:top-0 sm:right-0 sm:relative inline-flex h-9 items-center justify-start px-4 py-2 sm:pr-12 md:w-40 lg:w-64"
      id="site-search"
      ><span class="sr-only">Open Site Search</span><Search
        className="w-4 h-4"
      /><kbd
        class="pointer-events-none absolute right-1.5 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex"
        >/</kbd
      ></button
    >
  </nav>
</header>

<script>
  function openSearch() {
    const event = new Event("openSearch");
    document.dispatchEvent(event);
  }

  const search = document.getElementById("site-search");
  search?.addEventListener("click", openSearch);
</script>
